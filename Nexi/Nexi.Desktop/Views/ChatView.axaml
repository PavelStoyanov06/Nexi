<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:Nexi.Desktop.ViewModels"
             x:Class="Nexi.Desktop.Views.ChatView"
             x:DataType="vm:ChatViewModel">
  <DockPanel>
    <!-- Chat Messages -->
    <ScrollViewer DockPanel.Dock="Top">
      <ItemsControl ItemsSource="{CompiledBinding Messages}">
        <ItemsControl.DataTemplates>
          <DataTemplate DataType="vm:ChatMessageViewModel">
            <Border Margin="8,4"
                    Classes.assistant="{CompiledBinding IsAssistant}"
                    Classes.user="{CompiledBinding !IsAssistant}">
              <TextBlock Text="{CompiledBinding Text}"
                        TextWrapping="Wrap"/>
            </Border>
          </DataTemplate>
        </ItemsControl.DataTemplates>
      </ItemsControl>
    </ScrollViewer>

    <!-- Input Area -->
    <Border DockPanel.Dock="Bottom"
            Padding="8"
            Background="{DynamicResource SystemControlBackgroundChromeMediumBrush}">
      <Grid ColumnDefinitions="Auto,*">
        <Button Grid.Column="0"
                Command="{CompiledBinding ToggleRecordingCommand}"
                Classes.recording="{CompiledBinding IsRecording}">
          <PathIcon Data="{StaticResource MicrophoneIcon}"/>
        </Button>
        <TextBox Grid.Column="1"
                 Margin="8,0,0,0"
                 Text="{CompiledBinding InputText}"
                 Watermark="Type your message..."
                 AcceptsReturn="True"/>
      </Grid>
    </Border>
  </DockPanel>
</UserControl>
